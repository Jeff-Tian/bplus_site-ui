<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title><%= __('SEOTitle_SignIn') %></title>
    <meta name="description" content="<%= __('SEODesc_SignIn') %>">
    <%- include('header.html') -%>
    <link rel="stylesheet" type="text/css" href="<%= cdn.normal %>css/pc-mobile.css?<%= cdn.version %>">
</head>
<body ng-app="signIn" ng-controller="AppCtrl" class="b-background mobile">
<%- include('head.html') -%>
<div class="ui b-signin-wrapper padded container subcontainer">
    <div class="ui column b-signin-container b-background-lighter padded container subcontainer"
         style="margin-top: 2em;">
        <div class="b-signin-wide padded" tab=".b-signin-wide">
            <div class="ui bottom attached tab active" data-tab="login" ng-controller="LoginCtrl">
                <h2 class="ui centered header" ng-show="!!loginData.wechatToken"><%= __('绑定手机') %></h2>

                <form class="ui large fluid form login" ng-class="{'loading': submitting}" ng-submit="tryLogin($event)"
                      name="loginForm">
                    <div class="ui error message brand"></div>
                    <div class="ui">
                        <div class="field">
                            <div class="ui left icon input">
                                <i class="phone icon"></i>
                                <input type="text" name="mobile" placeholder="<%= __('Mobile') %>"
                                       ng-model="loginData.mobile">
                            </div>
                        </div>
                        <div class="field">
                            <div class="ui left icon input">
                                <i class="lock icon"></i>
                                <input type="password" name="password" placeholder="<%= __('PleaseInputPassword') %>"
                                       ng-model="loginData.password">
                            </div>
                        </div>
                        <div class="fields">
                            <div class="eight wide field">
                                <div class="ui checkbox remember-me" ng-hide="!!loginData.wechatToken">
                                    <input type="checkbox" ng-model="loginData.rememberMe" id="remember-me-check-box">
                                    <label for="remember-me-check-box"><%= __('RememberMe') %></label>
                                </div>
                            </div>
                            <div class="eight wide field ui right aligned container subcontainer">
                                <a href="reset-password" ng-click="resetPassword($event)"><%= __('ForgotPassword') %> <i
                                        class="hidden help circle icon"></i> </a>
                            </div>
                        </div>
                        <div class="ui divider horizontal"></div>
                        <button loading type="submit" class="ui fluid large red submit button hidden mobile-button"
                                ng-disabled="!isLoginFormValid()" ng-cloak>
                            {{!loginData.wechatToken ? "<%= __('SignIn') %>" : "<%= __('绑定') %>"}}
                        </button>
                        <button loading type="submit" class="ui fluid large red submit button"
                                ng-disabled="!isLoginFormValid()" ng-cloak>
                            {{!loginData.wechatToken ? "<%= __('SignIn') %>" : "<%= __('绑定') %>"}}
                        </button>
                    </div>
                </form>
                <a class="ui fluid large red basic button" href="#register" ng-click="register()">
                    <%= __('NoAccount') %> <%= __('SignUpNow') %>
                </a>
                <% if (featureSwitcher.enableWechat === true && (!device.isFromMobile || device.isFromWechatBrowser)) {
                %>
                <div class="ui divider" ng-hide="!!loginData.wechatToken"></div>
                <div class="ui" ng-hide="!!loginData.wechatToken">
                    <a class="wechat link" ng-click="logOnViaWechat()">
                        <%= __('SignInWithOtherWays') %>
                        <i class="big wechat icon"></i>
                    </a>
                </div>
                <% } %>
            </div>
            <div class="ui bottom attached tab" data-tab="register" ng-controller="SignUpCtrl">
                <h2 class="ui center aligned header grey color"><%= __('SignUp') %></h2>
                <register-form action="signUp" send-tracking="sendTracking" control="registerFormCtrl"></register-form>

                <div class="ui horizontal divider"></div>
                <a class="field ui fluid red basic button" href="#/login" ng-click="login()">
                    <%= __('HasAccount') %> <%= __('SignInNow') %>
                </a>
            </div>
            <div class="ui bottom attached tab" data-tab="wechat-logon" ng-controller="WechatLoginCtrl">
                <iframe name="wechat-frame" class="b-wechat-frame b-background-lighter"
                        ng-src="{{wechatQRPage}}"></iframe>
                <button type="reset" class="ui fluid large red basic button" ng-click="cancelWechatLogin()"
                        ng-class="{'inverted': invertCancelButtonTheme}"><%=
                    __('Cancel') %>
                </button>
            </div>
        </div>
    </div>
</div>
<%- include('footer.html') -%>

<!-- build:js js/cdn/m/sign-in.js -->
<script src="js/factories/FormValidation.js"></script>
<script src="js/directives/captcha.js"></script>
<script src="js/directives/ngEnter.js"></script>
<script src="js/directives/registerForm.js"></script>
<script src="js/directives/tab.js"></script>
<script src="js/directives/dropdown.js"></script>
<script src="js/controllers/LoginCtrl.js"></script>
<script src="js/factories/queryParser.js"></script>
<script src="js/factories/DeviceHelper.js"></script>
<script src="js/controllers/WechatLoginCtrl.js"></script>
<script src="js/controllers/SignUpCtrl.js"></script>
<script src="js/page/register/main.js"></script>
<!-- endbuild -->
</body>

</html>
